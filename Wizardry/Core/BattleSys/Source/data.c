#include "common-chax.h"
#include "battle-system.h"

const u8 BattleUnwindConfig[16][4] = {
	[0b0000] = { ACT_ATTACK, TAR_ATTACK, NOP_ATTACK, NOP_ATTACK },
	[0b0001] = { TAR_ATTACK, ACT_ATTACK, NOP_ATTACK, NOP_ATTACK },
	[0b0010] = { ACT_ATTACK, TAR_ATTACK, NOP_ATTACK, NOP_ATTACK },
	[0b0011] = { TAR_ATTACK, ACT_ATTACK, NOP_ATTACK, NOP_ATTACK },
	[0b0100] = { ACT_ATTACK, TAR_ATTACK, ACT_ATTACK, NOP_ATTACK },
	[0b0101] = { TAR_ATTACK, ACT_ATTACK, ACT_ATTACK, NOP_ATTACK },
	[0b0110] = { ACT_ATTACK, ACT_ATTACK, TAR_ATTACK, NOP_ATTACK },
	[0b0111] = { TAR_ATTACK, ACT_ATTACK, ACT_ATTACK, NOP_ATTACK },
	[0b1000] = { ACT_ATTACK, TAR_ATTACK, TAR_ATTACK, NOP_ATTACK },
	[0b1001] = { TAR_ATTACK, ACT_ATTACK, TAR_ATTACK, NOP_ATTACK },
	[0b1010] = { ACT_ATTACK, TAR_ATTACK, TAR_ATTACK, NOP_ATTACK },
	[0b1011] = { TAR_ATTACK, ACT_ATTACK, TAR_ATTACK, NOP_ATTACK },
	[0b1100] = { ACT_ATTACK, TAR_ATTACK, ACT_ATTACK, TAR_ATTACK },
	[0b1101] = { TAR_ATTACK, ACT_ATTACK, TAR_ATTACK, ACT_ATTACK },
	[0b1110] = { ACT_ATTACK, ACT_ATTACK, TAR_ATTACK, TAR_ATTACK },
	[0b1111] = { TAR_ATTACK, ACT_ATTACK, ACT_ATTACK, TAR_ATTACK },
};

/* damage = 0x100 / (0x100 + decease) */
const u16 _DmgDecreaseRef[100] = {
	[0] = 0,
	[1] = 3,
	[2] = 5,
	[3] = 8,
	[4] = 11,
	[5] = 13,
	[6] = 16,
	[7] = 19,
	[8] = 22,
	[9] = 25,
	[10] = 28,
	[11] = 32,
	[12] = 35,
	[13] = 38,
	[14] = 42,
	[15] = 45,
	[16] = 49,
	[17] = 52,
	[18] = 56,
	[19] = 60,
	[20] = 64,
	[21] = 68,
	[22] = 72,
	[23] = 76,
	[24] = 81,
	[25] = 85,
	[26] = 90,
	[27] = 95,
	[28] = 100,
	[29] = 105,
	[30] = 110,
	[31] = 115,
	[32] = 120,
	[33] = 126,
	[34] = 132,
	[35] = 138,
	[36] = 144,
	[37] = 150,
	[38] = 157,
	[39] = 164,
	[40] = 171,
	[41] = 178,
	[42] = 185,
	[43] = 193,
	[44] = 201,
	[45] = 209,
	[46] = 218,
	[47] = 227,
	[48] = 236,
	[49] = 246,
	[50] = 256,
	[51] = 266,
	[52] = 277,
	[53] = 289,
	[54] = 301,
	[55] = 313,
	[56] = 326,
	[57] = 339,
	[58] = 354,
	[59] = 368,
	[60] = 384,
	[61] = 400,
	[62] = 418,
	[63] = 436,
	[64] = 455,
	[65] = 475,
	[66] = 497,
	[67] = 520,
	[68] = 544,
	[69] = 570,
	[70] = 597,
	[71] = 627,
	[72] = 658,
	[73] = 692,
	[74] = 729,
	[75] = 768,
	[76] = 811,
	[77] = 857,
	[78] = 908,
	[79] = 963,
	[80] = 1024,
	[81] = 1091,
	[82] = 1166,
	[83] = 1250,
	[84] = 1344,
	[85] = 1451,
	[86] = 1573,
	[87] = 1713,
	[88] = 1877,
	[89] = 2071,
	[90] = 2304,
	[91] = 2588,
	[92] = 2944,
	[93] = 3401,
	[94] = 4011,
	[95] = 4864,
	[96] = 6144,
	[97] = 8277,
	[98] = 12544,
	[99] = 25344,
};
